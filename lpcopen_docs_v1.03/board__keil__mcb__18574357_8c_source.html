<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LPCOpen Platform: C:/nxp/v1.03/lpcopen_v1.03/lpcopen/software/lpc_core/lpc_board/boards_18xx_43xx/keil_mcb_18574357/board_keil_mcb_18574357.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="driver.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">LPCOpen Platform
   &#160;<span id="projectnumber">v1.03</span>
   </div>
   <div id="projectbrief">LPCOpen Platform for NXP LPC Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('board__keil__mcb__18574357_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">board_keil_mcb_18574357.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="board__keil__mcb__18574357_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * @brief Keil MCB 1857/4357 board file</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * @note</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright(C) NXP Semiconductors, 2012</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * @par</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * Software that is described herein is for illustrative purposes only</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * which provides customers with programming information regarding the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * LPC products.  This software is supplied &quot;AS IS&quot; without any warranties of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * any kind, and NXP Semiconductors and its licensor disclaim any and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * all warranties, express or implied, including all implied warranties of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * merchantability, fitness for a particular purpose and non-infringement of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * intellectual property rights.  NXP Semiconductors assumes no responsibility</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * or liability for the use of the software, conveys no license or rights under any</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * patent, copyright, mask work right, or any other intellectual property rights in</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * or to any products. NXP Semiconductors reserves the right to make changes</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * in the software without notification. NXP Semiconductors also makes no</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * representation or warranty that such application will be suitable for the</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * specified use without further testing or modification.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * @par</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * Permission to use, copy, modify, and distribute this software and its</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * documentation is hereby granted, under NXP Semiconductors&#39; and its</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * licensor&#39;s relevant copyrights in the software, without fee, provided that it</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * is used in conjunction with NXP Semiconductors microcontrollers.  This</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * copyright, permission, and disclaimer notice must appear in all copies of</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * this code.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="boards__18xx__43xx_2keil__mcb__18574357_2board_8h.html">board.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;string.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* Keil board uses 83848 PHY and retarget */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lpc__phy__dp83848_8c.html">lpc_phy_dp83848.c</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_retarget_8c.html">retarget.c</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/*****************************************************************************</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * Private types/enumerations/variables</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/* Port and bit mapping for LEDs on GPIOs */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">   47</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint8_t <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">ledports</a>[] = {6, 6, 6, 6, 6, 4, 4, 4};</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a0dcaf9e2e7920630ce64687b777b105a">   48</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint8_t <a class="code" href="board__keil__mcb__18574357_8c.html#a0dcaf9e2e7920630ce64687b777b105a">ledbits</a>[] = {24, 25, 26, 27, 28, 12, 13, 14};</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a9db4e36985b555785bfffc5be8763b34">   51</a></span>&#160;<span class="preprocessor">#define LCD_CS(x) ((x) ? (Chip_GPIO_WritePortBit(LPC_GPIO_PORT, 7, 16, true)) : (Chip_GPIO_WritePortBit(LPC_GPIO_PORT, \</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">                          7, 16, false)))</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a2d7669cf13f57b0929ae73ce42dd9240">   55</a></span>&#160;<a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> <a class="code" href="board__keil__mcb__18574357_8c.html#a2d7669cf13f57b0929ae73ce42dd9240">g_isPenDn</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a68b341ae35dcc1090d49a4b682753a9d">   56</a></span>&#160;<a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> <a class="code" href="board__keil__mcb__18574357_8c.html#a68b341ae35dcc1090d49a4b682753a9d">g_isNewPenDn</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a88c6877e8f7f2f081eec9def4d126568">   57</a></span>&#160;<span class="keyword">const</span> int32_t <a class="code" href="board__keil__mcb__18574357_8c.html#a88c6877e8f7f2f081eec9def4d126568">ad_left</a> = 3813;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a6e57e6fcd083801e01f3eed98f0fe5ef">   58</a></span>&#160;<span class="keyword">const</span> int32_t <a class="code" href="board__keil__mcb__18574357_8c.html#a6e57e6fcd083801e01f3eed98f0fe5ef">ad_top</a> = 3805;<span class="comment">// 237;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#aae3985fcace9370664c25eb6f854aa27">   59</a></span>&#160;<span class="keyword">const</span> int32_t <a class="code" href="board__keil__mcb__18574357_8c.html#aae3985fcace9370664c25eb6f854aa27">ad_right</a> = 360;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a49b5a291b4a08d92046be71dd5c26032">   60</a></span>&#160;<span class="keyword">const</span> int32_t <a class="code" href="board__keil__mcb__18574357_8c.html#a49b5a291b4a08d92046be71dd5c26032">ad_bottom</a> = 237; <span class="comment">// 3805;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf50a7eb2e7455d9263d94d876596985f">   62</a></span>&#160;<span class="keyword">const</span> <a class="code" href="struct_l_c_d___config___t.html" title="A structure for LCD Configuration.">LCD_Config_T</a> <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf50a7eb2e7455d9263d94d876596985f">MCB4300_LCD</a> = {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; 8,      </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; 4,      </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; 4,      </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; 240,     </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; 4,      </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; 3,      </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; 4,      </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; 320,     </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; 0,      </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; 1,      </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; 1,      </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; 1,      </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; 1,      </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; 6,      </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; <a class="code" href="group___i_p___l_c_d__001.html#gga6c48d93f27bccabf0a2e1937ba4a23cfa00e3399b074ff76827ba4bb796daf3b6">LCD_TFT</a>,    </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; <a class="code" href="group___i_p___l_c_d__001.html#gga8fd6a1eb4f76dc309c83b22197d0d435aaece371e0b75415f8d1827920f5c5a9e">LCD_COLOR_FORMAT_RGB</a>, </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; 0      </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;};</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/*****************************************************************************</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> * Public types/enumerations/variables</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gaa3cd3e43291e81e795d642b79b6088e6">   87</a></span>&#160;<a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gaa3cd3e43291e81e795d642b79b6088e6" title="Current system clock rate, mainly used for sysTick.">SystemCoreClock</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/*****************************************************************************</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> * Private functions</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/* Very simple (inaccurate) delay function */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">   94</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(<a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> i) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; <span class="keywordflow">while</span> (i--) {}</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/* Initializes default settings for UDA1380 */</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a5157c2199043f625d0b2c84eaf78166f">   99</a></span>&#160;<span class="keyword">static</span> <a class="code" href="group___l_p_c___types___public___types.html#ga67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> <a class="code" href="board__keil__mcb__18574357_8c.html#a5157c2199043f625d0b2c84eaf78166f">Board_Audio_CodecInit</a>(<span class="keywordtype">int</span> micIn)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; <span class="comment">/* Reset UDA1380 on board Keil */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x8, 0, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaec79b551b98008d8986e719926f254bc">SCU_MODE_FUNC0</a>));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 4, 0, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga769258ead822b26f77ea567456f58e2f" title="Set a GPIO port/bit state.">Chip_GPIO_WritePortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 4, 0, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; <span class="comment">/* delay 1us */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(100000);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga769258ead822b26f77ea567456f58e2f" title="Set a GPIO port/bit state.">Chip_GPIO_WritePortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 4, 0, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(100000);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; <span class="keywordflow">if</span> (!<a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___u_d_a1380.html#ga8b527cb95ccb6ddeaa0805e209238a87" title="Initialize UDA1380 to its default state.">UDA1380_Init</a>(<a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___u_d_a1380.html#gaf9586ee6ae236f9adcbec9e8cc70a5d0">UDA1380_MIC_IN_LR</a> &amp; - (micIn != 0))) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70ba2fd6f336d08340583bd620a7f5694c90">ERROR</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70bac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/* Write to LCD controller, with A0 = 0 */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a9bbb57e1e193e0c70b6b676a481f108b">  119</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#a9bbb57e1e193e0c70b6b676a481f108b">writeLCD00_16</a>(uint16_t c) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; uint8_t buf[1];</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a9db4e36985b555785bfffc5be8763b34">LCD_CS</a>(0);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; buf[0] = 0x70;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gae64bd476b75c03d0b952f08ea42a09be" title="SSP Polling Write in blocking mode.">Chip_SSP_WriteFrames_Blocking</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, buf, 1); <span class="comment">// Start + WR Register</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; buf[0] = (uint8_t) (c);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gae64bd476b75c03d0b952f08ea42a09be" title="SSP Polling Write in blocking mode.">Chip_SSP_WriteFrames_Blocking</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, buf, 1);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a9db4e36985b555785bfffc5be8763b34">LCD_CS</a>(1);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">/* Write to LCD controller, with A0 = 1 */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a19e2d35c3c1ff50b0964edfc77f3dc8d">  131</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#a19e2d35c3c1ff50b0964edfc77f3dc8d">writeLCD01_16</a>(uint16_t c) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; uint8_t buf[1];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a9db4e36985b555785bfffc5be8763b34">LCD_CS</a>(0);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; buf[0] = 0x72;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gae64bd476b75c03d0b952f08ea42a09be" title="SSP Polling Write in blocking mode.">Chip_SSP_WriteFrames_Blocking</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, buf, 1); <span class="comment">/* Start + WR Data */</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; buf[0] = (uint8_t) (c &gt;&gt; 8);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gae64bd476b75c03d0b952f08ea42a09be" title="SSP Polling Write in blocking mode.">Chip_SSP_WriteFrames_Blocking</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, buf, 1);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; buf[0] = (uint8_t) (c);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gae64bd476b75c03d0b952f08ea42a09be" title="SSP Polling Write in blocking mode.">Chip_SSP_WriteFrames_Blocking</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, buf, 1);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a9db4e36985b555785bfffc5be8763b34">LCD_CS</a>(1);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/* Write to LCD controller&#39;s register */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">  145</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(uint16_t reg, uint16_t dat) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a9bbb57e1e193e0c70b6b676a481f108b">writeLCD00_16</a>(reg);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a19e2d35c3c1ff50b0964edfc77f3dc8d">writeLCD01_16</a>(dat);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/* Pin configuration to communicate with LCD Controller */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a290a04511eb58bbd68985635b8339cce">  151</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#a290a04511eb58bbd68985635b8339cce">pinConfig</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; <span class="comment">/* (DC) */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 7, 16, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">/* Writes a value to the STMPE811 register */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">  158</a></span>&#160;<span class="keyword">static</span> <a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(uint8_t regAddr, uint8_t value)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; uint8_t val[2];</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; val[0] = regAddr;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; val[1] = value;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; <span class="keywordflow">return</span> <a class="code" href="group___i2_c__11_x_x.html#ga9ff549bdb526786d313c141b11cab43e" title="Transmit data to I2C slave using I2C Master mode.">Chip_I2C_MasterSend</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gabbd611226efc24e181159dc21c7fe96a">TSC_I2C_ADDR</a>, val, <span class="keyword">sizeof</span>(val));</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/* Reads a value to the STMPE811 register */</span></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#accc9f876714f24d50cc1bac22392ca47">  167</a></span>&#160;<span class="keyword">static</span> <a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> <a class="code" href="board__keil__mcb__18574357_8c.html#accc9f876714f24d50cc1bac22392ca47">readTSCReg</a>(uint8_t regAddr, uint8_t *value)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; <span class="keywordflow">return</span> <a class="code" href="group___i2_c__11_x_x.html#ga4a875b456dfe68acbe8ce1fc74d88bd3" title="Transfer a command to slave and receive data from slave after a repeated start.">Chip_I2C_MasterCmdRead</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gabbd611226efc24e181159dc21c7fe96a">TSC_I2C_ADDR</a>, regAddr, value, 1);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/* Check if touch is detected or not */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#ab26f319ad2d8f598003fab705fd1793a">  173</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="board__keil__mcb__18574357_8c.html#ab26f319ad2d8f598003fab705fd1793a">detectTSCTouch</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; uint8_t  CtrRegVal = 0;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="board__keil__mcb__18574357_8c.html#accc9f876714f24d50cc1bac22392ca47">readTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga094d629f5d2d2485085abd767be3efff">TSC_CTRL</a>, &amp;CtrRegVal) == 1) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (CtrRegVal &amp; (1 &lt;&lt; 7)) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">/* Get the touch coordinates from STMPE811 registers */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a79f25ac61df1240647a5678980667a3f">  186</a></span>&#160;<span class="keyword">static</span> <a class="code" href="group___l_p_c___types___public___types.html#ga67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> <a class="code" href="board__keil__mcb__18574357_8c.html#a79f25ac61df1240647a5678980667a3f">getTSCCoord</a>(int16_t *x, int16_t *y)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; uint8_t fifo_size, tscData[4], i;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; <span class="comment">/* Read all samples except the last one */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#accc9f876714f24d50cc1bac22392ca47">readTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga6092455278a1ac67204e0dbe08f9d13f">FIFO_SIZE</a>, &amp;fifo_size);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; <span class="keywordflow">for</span> (i = 0; i &lt; fifo_size; ++i) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group___i2_c__11_x_x.html#ga4a875b456dfe68acbe8ce1fc74d88bd3" title="Transfer a command to slave and receive data from slave after a repeated start.">Chip_I2C_MasterCmdRead</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gabbd611226efc24e181159dc21c7fe96a">TSC_I2C_ADDR</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaa98ee86665fcc3d54c340096cb0d8198">DATA_XYZ</a>, tscData, 4) == 0) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70ba2fd6f336d08340583bd620a7f5694c90">ERROR</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; <span class="comment">/* Retrieve last taken sample */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#ga4a875b456dfe68acbe8ce1fc74d88bd3" title="Transfer a command to slave and receive data from slave after a repeated start.">Chip_I2C_MasterCmdRead</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gabbd611226efc24e181159dc21c7fe96a">TSC_I2C_ADDR</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaa98ee86665fcc3d54c340096cb0d8198">DATA_XYZ</a>, tscData, 4);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; *x = (tscData[0] &lt;&lt; 4) | ((tscData[1] &amp; 0xF0) &gt;&gt; 4);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; *y = ((tscData[1] &amp; 0x0F) &lt;&lt; 8) | tscData[2];</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; <span class="comment">/* Clear interrupt flags */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga635e2152192f3891b7824ab0777023bd">INT_STA</a>, 0x1F);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70bac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/*****************************************************************************</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> * Public functions</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/* Update system core clock rate, should be called if the system has</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">   a clock rate change */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">  215</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f" title="Update system core clock rate, should be called if the system has a clock rate change.">SystemCoreClockUpdate</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; <span class="comment">/* CPU core speed */</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gaa3cd3e43291e81e795d642b79b6088e6" title="Current system clock rate, mainly used for sysTick.">SystemCoreClock</a> = <a class="code" href="group___c_l_o_c_k__18_x_x__43_x_x.html#gafb964074c3fa133e29c51bd31e4590ae" title="Returns a peripheral clock rate.">Chip_Clock_GetRate</a>(<a class="code" href="chip__clocks_8h.html#ga9cf9ddd5d1d7212c3ab1872e761be5a6a948d41fa161897793b7225cadd50fa1f">CLK_MX_MXCORE</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/* Initialize UART pins */</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gad9a7067de5694c1615c4814bcec03b34">  222</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24.html#gaff0add2a9439b5ec4954ad17c33eb6e2" title="Initialize pin muxing for UART interface.">Board_UART_Init</a>(<a class="code" href="struct_i_p___u_s_a_r_t__001___t.html" title="USART register block structure.">LPC_USART_T</a> *pUART)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; <span class="keywordflow">if</span> (pUART == <a class="code" href="group___p_e_r_i_p_h__18_x_x___b_a_s_e.html#ga3255c792adeee40643c8f5c32e852107">LPC_USART0</a>) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x2, 0, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga3c6a7533de5b5e9a11981f2ddbb7e5ee">SCU_MODE_MODE_REPEATER</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga60d35d65061196255b1470e3b9610fda">SCU_MODE_FUNC1</a>));  <span class="comment">/* P2.0 : UART0_TXD */</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x2, 1, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga60d35d65061196255b1470e3b9610fda">SCU_MODE_FUNC1</a>)); <span class="comment">/* P2.1 : UART0_RXD */</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pUART == <a class="code" href="group___p_e_r_i_p_h__18_x_x___b_a_s_e.html#ga206737c2cfff0f9dcaac507068711310">LPC_USART3</a>) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x2, 3, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga3c6a7533de5b5e9a11981f2ddbb7e5ee">SCU_MODE_MODE_REPEATER</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>));   <span class="comment">/* P2.3 : UART3_TXD */</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x2, 4, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* P2.4 : UART3_RXD */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/* Initialize debug output via UART for board */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gabcba073f50ad637ee6bc852f64ea2ce6">  235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gabcba073f50ad637ee6bc852f64ea2ce6" title="Initializes board UART for output, required for printf redirection.">Board_Debug_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#if defined(DEBUG_UART)</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor"></span> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24.html#gaff0add2a9439b5ec4954ad17c33eb6e2" title="Initialize pin muxing for UART interface.">Board_UART_Init</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; <a class="code" href="group___p_e_r_i_p_h__11_x_x___u_a_r_t.html#gaf024084be4068e407aab7c30e105f7af" title="Initializes the pUART peripheral.">Chip_UART_Init</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; <a class="code" href="group___p_e_r_i_p_h__11_x_x___u_a_r_t.html#ga19f24dcf53316cbfb204003f506d5be5" title="Sets best dividers to get a target bit rate (without fractional divider)">Chip_UART_SetBaud</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>, 115200);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; <a class="code" href="group___p_e_r_i_p_h__11_x_x___u_a_r_t.html#ga26626229fe35e820bf2daf6a87c43155" title="Configure data width, parity mode and stop bits.">Chip_UART_ConfigData</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>, <a class="code" href="group___i_p___u_s_a_r_t__001.html#gga26b5e1d0320d757ee100188cbd06ebe9a5a1857edfe041a41ef5e7f098be8ead2">UART_DATABIT_8</a>, <a class="code" href="group___i_p___u_s_a_r_t__001.html#gga1d8333172a43527aa8825a221466f003aa80d2d8ea61454045ebe71d155e85b3d">UART_PARITY_NONE</a>, <a class="code" href="group___i_p___u_s_a_r_t__001.html#gga278f927ed8557330e235e8ecb6c23df3ab9c26fe02b2f4407d7106ea4da1f74ab">UART_STOPBIT_1</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; <span class="comment">/* Enable UART Transmit */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; <a class="code" href="group___x_x__40_x_x.html#gaae74d94c72863065c271aaffb29a0e01" title="Enable/Disable transmission on UART TxD pin.">Chip_UART_TxCmd</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1a7d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/* Sends a character on the UART */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gada2a79f4fcd7cd730317fc34291bf08e">  250</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gada2a79f4fcd7cd730317fc34291bf08e" title="Sends a single character on the UART, required for printf redirection.">Board_UARTPutChar</a>(<span class="keywordtype">char</span> ch)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#if defined(DEBUG_UART)</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor"></span> <span class="keywordflow">while</span> (<a class="code" href="group___p_e_r_i_p_h__11_x_x___u_a_r_t.html#gaa600b8621d1425b1b493238a68f38088" title="Transmit a single byte through the UART peripheral.">Chip_UART_SendByte</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>, (uint8_t) ch) == <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70ba2fd6f336d08340583bd620a7f5694c90">ERROR</a>) {}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">/* Gets a character from the UART, returns EOF if no character is ready */</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4cffd2ff35f970b7dfad4fdf6419ecf6">  258</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4cffd2ff35f970b7dfad4fdf6419ecf6" title="Get a single character from the UART, required for scanf input.">Board_UARTGetChar</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#if defined(DEBUG_UART)</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor"></span> uint8_t data;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="group___x_x__40_x_x.html#ga352bc06a2e7e99c13fc5f10f40212643" title="Receive a single data from UART peripheral.">Chip_UART_ReceiveByte</a>(<a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24___o_p_t_i_o_n_s.html#gace21428290f0e412332701391f825a10">DEBUG_UART</a>, &amp;data) == <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70bac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) data;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor"></span> <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">/* Outputs a string on the debug UART */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga26211607542af1bb2a867d6641a8d4f3">  271</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga26211607542af1bb2a867d6641a8d4f3" title="Prints a string to the UART.">Board_UARTPutSTR</a>(<span class="keywordtype">char</span> *str)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#if defined(DEBUG_UART)</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor"></span> <span class="keywordflow">while</span> (*str != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gada2a79f4fcd7cd730317fc34291bf08e" title="Sends a single character on the UART, required for printf redirection.">Board_UARTPutChar</a>(*str++);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/* Initializes board LED(s) */</span></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#a683aa3eaefaa7fcb31f505ca401749a8">  281</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#a683aa3eaefaa7fcb31f505ca401749a8">Board_LED_Init</a>()</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; <span class="comment">/* Must make sure J21 is installed to enabled LEDs */</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; <span class="comment">/* PD.10 : LED 0 (leftmost) */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; <span class="comment">/* PD.11 : LED 1 */</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; <span class="comment">/* PD.12 : LED 2 */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; <span class="comment">/* PD.13 : LED 3 */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; <span class="comment">/* PD.14 : LED 4 */</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; <span class="comment">/* P9.0  : LED 5 */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; <span class="comment">/* P9.1  : LED 6 */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; <span class="comment">/* P9.2  : LED 7 (rightmost) */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; <span class="keywordflow">for</span> (i = 0; i &lt; (<span class="keyword">sizeof</span>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">ledports</a>) / <span class="keyword">sizeof</span>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">ledports</a>[0])); i++) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">ledports</a>[i], <a class="code" href="board__keil__mcb__18574357_8c.html#a0dcaf9e2e7920630ce64687b777b105a">ledbits</a>[i], <span class="keyword">true</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#ifndef BOARD_LED_TEST_FUNCTION_WORKS</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor"></span><span class="comment">/* FIXME: temporary code for toggle LED support only */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#ac0716db3e02eeeab29fedab64619935f">  301</a></span>&#160;<span class="keyword">static</span> uint8_t <a class="code" href="board__keil__mcb__18574357_8c.html#ac0716db3e02eeeab29fedab64619935f">LEDStates</a>;  <span class="comment">/* shadow variable for LED states */</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/* Sets the state of a board LED to on or off */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4beb63d516764b260e9798642fab0047">  305</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4beb63d516764b260e9798642fab0047" title="Sets the state of a board LED to on or off.">Board_LED_Set</a>(uint8_t LEDNumber, <span class="keywordtype">bool</span> <a class="code" href="group___e_x_a_m_p_l_e_s___p_e_r_i_p_h__18_x_x43_x_x___r_i_t.html#ga9d2defc76051664aa237611ff3b09658">On</a>)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; <span class="keywordflow">if</span> (LEDNumber &lt;= 7) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="group___g_p_i_o__11_x_x.html#ga769258ead822b26f77ea567456f58e2f" title="Set a GPIO port/bit state.">Chip_GPIO_WritePortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">ledports</a>[LEDNumber], <a class="code" href="board__keil__mcb__18574357_8c.html#a0dcaf9e2e7920630ce64687b777b105a">ledbits</a>[LEDNumber], On);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#ifndef BOARD_LED_TEST_FUNCTION_WORKS</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (On) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="board__keil__mcb__18574357_8c.html#ac0716db3e02eeeab29fedab64619935f">LEDStates</a> |= (1 &lt;&lt; LEDNumber); <span class="comment">/* set the state */</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <a class="code" href="board__keil__mcb__18574357_8c.html#ac0716db3e02eeeab29fedab64619935f">LEDStates</a> &amp;= ~(1 &lt;&lt; LEDNumber); <span class="comment">/* clear the state */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor"></span> }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/* Returns the current state of a board LED */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga8e79f51947703de384c34bc86908bd9e">  321</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga8e79f51947703de384c34bc86908bd9e" title="Returns the current state of a board LED.">Board_LED_Test</a>(uint8_t LEDNumber)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; <span class="keywordflow">if</span> (LEDNumber &lt;= 7) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#ifndef BOARD_LED_TEST_FUNCTION_WORKS</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="board__keil__mcb__18574357_8c.html#ac0716db3e02eeeab29fedab64619935f">LEDStates</a> &amp; (1 &lt;&lt; LEDNumber)) { <span class="comment">/* LED is on */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">else</span> { <span class="comment">/* LED is off */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) <a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68dac926cb9173b1bb5037763a7fe63">ledports</a>[LEDNumber], <a class="code" href="board__keil__mcb__18574357_8c.html#a0dcaf9e2e7920630ce64687b777b105a">ledbits</a>[LEDNumber]);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor"></span> }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/* Returns the MAC address assigned to this board */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga4e21ba86f42bc4dd53b704a81d923e1d">  339</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga4e21ba86f42bc4dd53b704a81d923e1d" title="Returns the MAC address assigned to this board.">Board_ENET_GetMacADDR</a>(uint8_t *mcaddr)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; <span class="keyword">const</span> uint8_t boardmac[] = {0x00, 0x60, 0x37, 0x12, 0x34, 0x56};</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; memcpy(mcaddr, boardmac, 6);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">/* Set up and initialize all required blocks and functions related to the</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">   board hardware */</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119">  348</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119" title="Set up and initialize all required blocks and functions related to the board hardware.">Board_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; <span class="comment">/* Sets up DEBUG UART */</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga5f3d8b382683793eb0b2723083f518f8">DEBUGINIT</a>();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; <span class="comment">/* Updates SystemCoreClock global var with current clock speed */</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f" title="Update system core clock rate, should be called if the system has a clock rate change.">SystemCoreClockUpdate</a>();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; <span class="comment">/* Initializes GPIO */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#gad799db2a825ded50fc7998f228db1b24" title="Initialize GPIO block.">Chip_GPIO_Init</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; <span class="comment">/* Setup GPIOs for USB demos */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x9, 5, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>));   <span class="comment">/* P9_5 USB1_VBUS_EN, USB1 VBus function */</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x2, 5, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* P2_5 USB1_VBUS, MUST CONFIGURE THIS SIGNAL FOR USB1 NORMAL OPERATION */</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x6, 3, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga60d35d65061196255b1470e3b9610fda">SCU_MODE_FUNC1</a>));   <span class="comment">/* P6_3 USB0_PWR_EN, USB0 VBus function */</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; <span class="comment">/* Initialize LEDs */</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a683aa3eaefaa7fcb31f505ca401749a8">Board_LED_Init</a>();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">/* Sets up board specific ADC interface */</span></div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___h_i_t_e_x___e_v_a__18504350.html#ga0f76024d48ab27a5c0842f4bee0685e5">  369</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24.html#ga0205be4794b9b4586005384a92bccef6" title="Initialize pin muxing for ADC channel 0.">Board_ADC_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{}</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">/* Sets up board specific I2C interface */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gad631ffdb10f310f5a4b05f603b6149bf">  373</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gad631ffdb10f310f5a4b05f603b6149bf" title="Initialize I2C Pins for I2C Operation.">Board_I2C_Init</a>(<a class="code" href="group___i2_c__11_x_x.html#ga1c03245782af1bec5eaaf1f54207cfc2" title="I2C interface IDs.">I2C_ID_T</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="group___i2_c__18_x_x__43_x_x.html#gga1c03245782af1bec5eaaf1f54207cfc2aeb0f494c71f34592c5a4500ee98ab4a2">I2C1</a>) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">/* Configure pin function for I2C1 on PE.13 (I2C1_SDA) and PE.15 (I2C1_SCL) */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xE, 13, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>));</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xE, 15, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>));</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gad01225996749db1265c496568a29eaf8" title="I2C Pin Configuration.">Chip_SCU_I2C0PinConfig</a>(<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga3d2136c7b5dd51b79986b151192bba55">I2C0_STANDARD_FAST_MODE</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">/* Sets up board specific I2S interface and UDA1380 */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gac588c7edb8f08dbb686aec2686b2819a">  386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gac588c7edb8f08dbb686aec2686b2819a" title="Sets up board specific I2S interface and UDA1380 CODEC.">Board_Audio_Init</a>(<a class="code" href="struct_i_p___i2_s__001___t.html" title="I2S register block structure.">LPC_I2S_T</a> *pI2S, <span class="keywordtype">int</span> micIn)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; <a class="code" href="struct_chip___i2_s___audio___format___t.html" title="I2S Audio Format Structure.">Chip_I2S_Audio_Format_T</a> I2S_Config;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; I2S_Config.<a class="code" href="struct_chip___i2_s___audio___format___t.html#a930ec675cfdc1a0f18f3414583f7b950">SampleRate</a> = 48000;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; I2S_Config.<a class="code" href="struct_chip___i2_s___audio___format___t.html#af735e23324626601fb3ef1ba2f9098ca">ChannelNumber</a> = 2; <span class="comment">/* 1 is mono, 2 is stereo */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; I2S_Config.<a class="code" href="struct_chip___i2_s___audio___format___t.html#af7bd178db9673a9753c589a27fa0495f">WordWidth</a> =  16;  <span class="comment">/* 8, 16 or 32 bits */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; <a class="code" href="group___i2_s__17_x_x__40_x_x.html#ga006752f0240a956ae02fba521e63c053" title="Initialize for I2S.">Chip_I2S_Init</a>(<a class="code" href="group___p_e_r_i_p_h__18_x_x___b_a_s_e.html#ga4887dae88a015542b54639daf8ec5f61">LPC_I2S0</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; <a class="code" href="group___i2_s__17_x_x__40_x_x.html#ga7241afa360c09e9362786fb662fdaf9e" title="Configure I2S for Audio Format input.">Chip_I2S_Config</a>(<a class="code" href="group___p_e_r_i_p_h__18_x_x___b_a_s_e.html#ga4887dae88a015542b54639daf8ec5f61">LPC_I2S0</a>, <a class="code" href="group___i_p___i2_s__001.html#gga5aa53f62bde14c54a6453c831655cda7a874c6f7bdc000517693379e45822cfec">I2S_TX_MODE</a>, &amp;I2S_Config);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; <span class="comment">/* Init UDA1380 CODEC */</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; <span class="keywordflow">while</span> (<a class="code" href="board__keil__mcb__18574357_8c.html#a5157c2199043f625d0b2c84eaf78166f">Board_Audio_CodecInit</a>(micIn) != <a class="code" href="group___l_p_c___types___public___types.html#gga67a0db04d321a74b7e7fcfd3f1a3f70bac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) {}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/* Initialize the LCD interface */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gaecd754364f22fb6b8e844946583bf77a">  401</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gaecd754364f22fb6b8e844946583bf77a" title="Initialize LCD Interface.">Board_LCD_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; <span class="comment">/* Reset LCD and wait for reset to complete */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; <a class="code" href="group___r_g_u__18_x_x__43_x_x.html#gaab38969672397ea2cb39e73a91f498de" title="Trigger a peripheral reset for the selected peripheral.">Chip_RGU_TriggerReset</a>(<a class="code" href="group___r_g_u__18_x_x__43_x_x.html#gga1bcb8682bfe879073de7fe8bc7cedafcaf06ae84de62a32823235b381a3d7fbd6">RGU_LCD_RST</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; <span class="keywordflow">while</span> (<a class="code" href="group___r_g_u__18_x_x__43_x_x.html#ga2baba5d1c86f37b2f15997ff7322181d" title="Checks the reset status of a peripheral.">Chip_RGU_InReset</a>(<a class="code" href="group___r_g_u__18_x_x__43_x_x.html#gga1bcb8682bfe879073de7fe8bc7cedafcaf06ae84de62a32823235b381a3d7fbd6">RGU_LCD_RST</a>)) {}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; <span class="comment">/* Set backlight GPIO as an output */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 3, 8, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga2b3077b82d7b42508b58831db4f58a5c" title="Initialize the LCD controller on the QVGA (320x240) TFT LCD.">Board_InitLCDController</a>();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">/* Initialize the LCD controller on the external QVGA (320x240) TFT LCD*/</span></div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga2b3077b82d7b42508b58831db4f58a5c">  414</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga2b3077b82d7b42508b58831db4f58a5c" title="Initialize the LCD controller on the QVGA (320x240) TFT LCD.">Board_InitLCDController</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; <span class="comment">/* LCD with HX8347-D LCD Controller                                         */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; <a class="code" href="struct_s_s_p___config_format.html">SSP_ConfigFormat</a> <a class="code" href="group___e_x_a_m_p_l_e_s___p_e_r_i_p_h__18_x_x43_x_x___s_s_p.html#ga296bc3828b7d57916e88fa6a38071691">ssp_format</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(5);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a290a04511eb58bbd68985635b8339cce">pinConfig</a>();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; <span class="comment">/* TBD Externally */</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#ga66e20405561e8d3dacba65cbfe41d556" title="Initialize the SSP.">Chip_SSP_Init</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; <span class="comment">// NVIC_EnableIRQ(SSP_ID);</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#ga60e601329b0aa6afe5f355dc6e8f84bd" title="Set the SSP operating modes, master or slave.">Chip_SSP_SetMaster</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#ga373660d8ad7b28fb71209539b1e72717" title="Set the clock frequency for SSP interface.">Chip_SSP_SetBitRate</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, 1000000);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; ssp_format.<a class="code" href="struct_s_s_p___config_format.html#ae0bcdd44e7013f8593095c1383b784b2">frameFormat</a> = <a class="code" href="group___s_s_p__18_x_x__43_x_x.html#gga63017a49bd68c82747f2900f9decb394a04830722a3c3c26165b6e86944f80799">SSP_FRAMEFORMAT_SPI</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; ssp_format.<a class="code" href="struct_s_s_p___config_format.html#a1f54868a0645f65bd9d946b9fd305ca2">bits</a> = <a class="code" href="group___s_s_p__18_x_x__43_x_x.html#gga9f7d343aff0392b45fc2d9db69dbe816afed74a949c86fb130814553eeeaa28fc">SSP_BITS_8</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; ssp_format.<a class="code" href="struct_s_s_p___config_format.html#aea7fde50f1241fb6909f613283e25db1">clockMode</a> = <a class="code" href="group___s_s_p__18_x_x__43_x_x.html#gga8efae4a5aae79c90592fe135c01486caa356a1e930e648bee4fdcf58bbf2be871">SSP_CLOCK_MODE0</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gaa6079690cfa24bc959edf8c407ea65a5" title="Set up the SSP frame format.">Chip_SSP_SetFormat</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>, &amp;ssp_format);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; <a class="code" href="group___s_s_p__11_x_x.html#gaf49b9a4689c9ae39bbd8c1ac20d31073" title="Enable SSP operation.">Chip_SSP_Enable</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaf68e46dda7997324885e34b8e96a0523">SSP_ID</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(200);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; <span class="comment">/* Driving ability settings ------------------------------------------------*/</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xEA, 0x00);     <span class="comment">/* Power control internal used (1)    */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xEB, 0x20);     <span class="comment">/* Power control internal used (2)    */</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xEC, 0x0C);     <span class="comment">/* Source control internal used (1)   */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xED, 0xC7);     <span class="comment">/* Source control internal used (2)   */</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xE8, 0x38);     <span class="comment">/* Source output period Normal mode   */</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xE9, 0x10);     <span class="comment">/* Source output period Idle mode     */</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xF1, 0x01);     <span class="comment">/* RGB 18-bit interface ;0x0110       */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0xF2, 0x10);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; <span class="comment">/* Adjust the Gamma Curve --------------------------------------------------*/</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x40, 0x01);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x41, 0x00);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x42, 0x00);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x43, 0x10);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x44, 0x0E);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x45, 0x24);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x46, 0x04);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x47, 0x50);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x48, 0x02);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x49, 0x13);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x4A, 0x19);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x4B, 0x19);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x4C, 0x16);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x50, 0x1B);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x51, 0x31);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x52, 0x2F);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x53, 0x3F);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x54, 0x3F);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x55, 0x3E);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x56, 0x2F);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x57, 0x7B);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x58, 0x09);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x59, 0x06);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x5A, 0x06);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x5B, 0x0C);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x5C, 0x1D);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x5D, 0xCC);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; <span class="comment">/* Power voltage setting ---------------------------------------------------*/</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x1B, 0x1B);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x1A, 0x01);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x24, 0x2F);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x25, 0x57);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x23, 0x88);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; <span class="comment">/* Power on setting --------------------------------------------------------*/</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x18, 0x36);     <span class="comment">/* Internal oscillator frequency adj  */</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x19, 0x01);     <span class="comment">/* Enable internal oscillator         */</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x01, 0x00);     <span class="comment">/* Normal mode, no scrool             */</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x1F, 0x88);     <span class="comment">/* Power control 6 - DDVDH Off        */</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(20);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x1F, 0x82);     <span class="comment">/* Power control 6 - Step-up: 3 x VCI */</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(5);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x1F, 0x92);     <span class="comment">/* Power control 6 - Step-up: On      */</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(5);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x1F, 0xD2);     <span class="comment">/* Power control 6 - VCOML active     */</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(5);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; <span class="comment">/* Color selection ---------------------------------------------------------*/</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x17, 0x55);     <span class="comment">/* RGB, System interface: 16 Bit/Pixel*/</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x00, 0x00);     <span class="comment">/* Scrolling off, no standby          */</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; <span class="comment">/* Interface config --------------------------------------------------------*/</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x2F, 0x11);     <span class="comment">/* LCD Drive: 1-line inversion        */</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x31, 0x02);     <span class="comment">/* Value for SPI: 0x00, RBG: 0x02     */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x32, 0x00);     <span class="comment">/* DPL=0, HSPL=0, VSPL=0, EPL=0       */</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; <span class="comment">/* Display on setting ------------------------------------------------------*/</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x28, 0x38);     <span class="comment">/* PT(0,0) active, VGL/VGL            */</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#ade8146bdfd5c85e4994b1f5a13b9da46">delay</a>(20);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x28, 0x3C);     <span class="comment">/* Display active, VGL/VGL            */</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x16, 0x00);     <span class="comment">/* Mem Access Control (MX/Y/V/L,BGR)  */</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; <span class="comment">/* Display scrolling settings ----------------------------------------------*/</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x0E, 0x00);     <span class="comment">/* TFA MSB                            */</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x0F, 0x00);     <span class="comment">/* TFA LSB                            */</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x10, 320 &gt;&gt; 8);    <span class="comment">/* VSA MSB                            */</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x11, 320 &amp;  0xFF);   <span class="comment">/* VSA LSB                            */</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x12, 0x00);     <span class="comment">/* BFA MSB                            */</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a5fa3dbec019230719cb36df4acb85414">writeLCDReg</a>(0x13, 0x00);     <span class="comment">/* BFA LSB                            */</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">/* Initializes the STMPE811 touch screen controller */</span></div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga69ec3e6ba83f9793dd8ac9c78314f6f9">  524</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga69ec3e6ba83f9793dd8ac9c78314f6f9" title="Initialize touchscreen controller.">Board_InitTouchController</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; <span class="keyword">volatile</span> int32_t i;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#ga932bfc2f55180a71b93427e88b6223e6" title="Event handler function type.">I2C_EVENTHANDLER_T</a> old = <a class="code" href="group___i2_c__11_x_x.html#gafad03b4f6c0ecb3f59f014ab63bfda5c" title="Get pointer to current function handling the events.">Chip_I2C_GetMasterEventHandler</a>(<a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga30dfcc4901853a765d4d34a865a31f95">UDA1380_I2C_BUS</a>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; <span class="comment">/* Initialize Pin mux and other board related I2C stuff */</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gad631ffdb10f310f5a4b05f603b6149bf" title="Initialize I2C Pins for I2C Operation.">Board_I2C_Init</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; <span class="comment">/* Init I2C */</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#gab79263d278814945df2cd44c5db7b514" title="Initializes the LPC_I2C peripheral with specified parameter.">Chip_I2C_Init</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#ga17fac5d72058db8eed11d247e78b74ed" title="Set up clock rate for LPC_I2C peripheral.">Chip_I2C_SetClockRate</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, 100000);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#ga1fc3fc0946344e9551d9eef0bbf610b9" title="Set function that must handle I2C events.">Chip_I2C_SetMasterEventHandler</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, <a class="code" href="group___i2_c__11_x_x.html#gaaa89a66d658a41325b3c5e56bc059401" title="Default event handler for polling operation.">Chip_I2C_EventHandlerPolling</a>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; <span class="comment">/* Reset Touch-screen controller     */</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga3e118d94e795ce95926224713be1dad6">SYS_CTRL1</a>, 0x02);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; <span class="keywordflow">for</span> (i = 0; i &lt; 200000; i++) {}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; <span class="comment">/* Enable TSC and ADC                 */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga49363697fc00b96dfa49878771ce438c">SYS_CTRL2</a>, 0x0C);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; <span class="comment">/* Enable Touch detect, FIFO          */</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga8dc8a6ba32861f0a3cbd89fa1ec0d216">INT_EN</a>, 0x07);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; <span class="comment">/* Set sample time , 12-bit mode      */</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga1f9ba50261f8bde94dd0c0352ec25ff9">ADC_CTRL1</a>, 0x69);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; <span class="keywordflow">for</span> (i = 0; i &lt; 40000; i++) {}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; <span class="comment">/* ADC frequency 3.25 MHz             */</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaa86aff18483d8653c3926ef4c56fe488">ADC_CTRL2</a>, 0x01);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; <span class="comment">/* Tracking index: 8, operation mode : XY only */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga094d629f5d2d2485085abd767be3efff">TSC_CTRL</a>, 0x22);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; <span class="comment">/* Detect delay 10us Settle time 500us*/</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga25e4223e4d65c515d00f7857a8bd167f">TSC_CFG</a>, 0xC2);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; <span class="comment">/* Threshold for FIFO                 */</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaa3acf2cc5d0a06f62feee06b4e8e4174">FIFO_TH</a>, 0x01);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; <span class="comment">/* FIFO reset                         */</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga83e233a1ea9129e8f5062088797cf46c">FIFO_STA</a>, 0x01);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; <span class="comment">/* FIFO not reset                    */</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga83e233a1ea9129e8f5062088797cf46c">FIFO_STA</a>, 0x00);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; <span class="comment">/* Drive 50 mA typical               */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga210dc1e96c4a1ca02ecb1fa645f4edfc">TSC_I_DRIVE</a>, 0x01);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; <span class="comment">/* Pins are used for touchscreen     */</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga1668fffbbec2f5492771115e7ad6e1f8">GPIO_ALT_FUNCT</a>, 0x00);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; <span class="comment">/* Enable TSC                        */</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga094d629f5d2d2485085abd767be3efff">TSC_CTRL</a>, 0x01);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; <span class="comment">/* Clear interrupt status            */</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; <a class="code" href="board__keil__mcb__18574357_8c.html#a895db368aa3d5ee55308d8dcaec04b0a">writeTSCReg</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga635e2152192f3891b7824ab0777023bd">INT_STA</a>, 0xFF);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; <span class="comment">/* Restore I2C to its default mode */</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#ga1fc3fc0946344e9551d9eef0bbf610b9" title="Set function that must handle I2C events.">Chip_I2C_SetMasterEventHandler</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, old);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">/* Poll for Touch position */</span></div>
<div class="line"><a name="l00576"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga9175202605cdebb0475216aadf1d0421">  576</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga9175202605cdebb0475216aadf1d0421" title="Get Touch coordinates.">Board_GetTouchPos</a>(int16_t *pX, int16_t *pY)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; <span class="keywordtype">bool</span> res;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; <a class="code" href="group___i2_c__11_x_x.html#ga932bfc2f55180a71b93427e88b6223e6" title="Event handler function type.">I2C_EVENTHANDLER_T</a> old = <a class="code" href="group___i2_c__11_x_x.html#gafad03b4f6c0ecb3f59f014ab63bfda5c" title="Get pointer to current function handling the events.">Chip_I2C_GetMasterEventHandler</a>(<a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga30dfcc4901853a765d4d34a865a31f95">UDA1380_I2C_BUS</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; <span class="comment">/* It is very unlikely that this will loop more than once */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; <span class="keywordflow">while</span> (!<a class="code" href="group___i2_c__11_x_x.html#ga1fc3fc0946344e9551d9eef0bbf610b9" title="Set function that must handle I2C events.">Chip_I2C_SetMasterEventHandler</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, <a class="code" href="group___i2_c__11_x_x.html#gaaa89a66d658a41325b3c5e56bc059401" title="Default event handler for polling operation.">Chip_I2C_EventHandlerPolling</a>)) {}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; res = <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gac7f9077a8ce455a595262149eb12d0db" title="Get touch screen position (Interrupt Based)">Board_I2C_GetTouchPos</a>(pX, pY);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; <span class="comment">/* It is very unlikely that this will loop more than once */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; <span class="keywordflow">while</span> (!<a class="code" href="group___i2_c__11_x_x.html#ga1fc3fc0946344e9551d9eef0bbf610b9" title="Set function that must handle I2C events.">Chip_I2C_SetMasterEventHandler</a>(<a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#ga614fc0b3ac9b2204ced56fc994f914a3">TSC_I2C_BUS</a>, old)) {}</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">/* Get touch screen position */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gac7f9077a8ce455a595262149eb12d0db">  590</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gac7f9077a8ce455a595262149eb12d0db" title="Get touch screen position (Interrupt Based)">Board_I2C_GetTouchPos</a>(int16_t *pX, int16_t *pY)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; int16_t x, y, <a class="code" href="group___e_x_a_m_p_l_e_s___p_e_r_i_p_h__8_x_x___m_r_t.html#ga97c679e43198726c3f13aa081f957f6d">rng</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="board__keil__mcb__18574357_8c.html#ab26f319ad2d8f598003fab705fd1793a">detectTSCTouch</a>()) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="board__keil__mcb__18574357_8c.html#a79f25ac61df1240647a5678980667a3f">getTSCCoord</a>(&amp;x, &amp;y);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <a class="code" href="board__keil__mcb__18574357_8c.html#a2d7669cf13f57b0929ae73ce42dd9240">g_isPenDn</a> = 1;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <a class="code" href="board__keil__mcb__18574357_8c.html#a68b341ae35dcc1090d49a4b682753a9d">g_isNewPenDn</a> = 1;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">/* calibrate X */</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  rng = <a class="code" href="board__keil__mcb__18574357_8c.html#aae3985fcace9370664c25eb6f854aa27">ad_right</a> - <a class="code" href="board__keil__mcb__18574357_8c.html#a88c6877e8f7f2f081eec9def4d126568">ad_left</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">if</span> (rng &lt; 0) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   rng = -<a class="code" href="group___e_x_a_m_p_l_e_s___p_e_r_i_p_h__8_x_x___m_r_t.html#ga97c679e43198726c3f13aa081f957f6d">rng</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  x -= (<a class="code" href="board__keil__mcb__18574357_8c.html#aae3985fcace9370664c25eb6f854aa27">ad_right</a> &lt; <a class="code" href="board__keil__mcb__18574357_8c.html#a88c6877e8f7f2f081eec9def4d126568">ad_left</a>) ? <a class="code" href="board__keil__mcb__18574357_8c.html#aae3985fcace9370664c25eb6f854aa27">ad_right</a> : ad_left;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  *pX = (x * <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaee1dc6ceb5b54ed4258289887fa9b259">C_GLCD_H_SIZE</a>) / rng;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> (ad_left &gt; <a class="code" href="board__keil__mcb__18574357_8c.html#aae3985fcace9370664c25eb6f854aa27">ad_right</a>) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   *pX = <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaee1dc6ceb5b54ed4258289887fa9b259">C_GLCD_H_SIZE</a> - *pX;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">/* calibrate Y */</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  rng = <a class="code" href="board__keil__mcb__18574357_8c.html#a49b5a291b4a08d92046be71dd5c26032">ad_bottom</a> - <a class="code" href="board__keil__mcb__18574357_8c.html#a6e57e6fcd083801e01f3eed98f0fe5ef">ad_top</a>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keywordflow">if</span> (rng &lt; 0) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   rng = -<a class="code" href="group___e_x_a_m_p_l_e_s___p_e_r_i_p_h__8_x_x___m_r_t.html#ga97c679e43198726c3f13aa081f957f6d">rng</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  y -= (<a class="code" href="board__keil__mcb__18574357_8c.html#a49b5a291b4a08d92046be71dd5c26032">ad_bottom</a> &lt; <a class="code" href="board__keil__mcb__18574357_8c.html#a6e57e6fcd083801e01f3eed98f0fe5ef">ad_top</a>) ? <a class="code" href="board__keil__mcb__18574357_8c.html#a49b5a291b4a08d92046be71dd5c26032">ad_bottom</a> : ad_top;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  *pY = (y * <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaa0b3699a9802eefdf407f0caa59195d5">C_GLCD_V_SIZE</a>) / rng;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">if</span> (ad_top &gt; <a class="code" href="board__keil__mcb__18574357_8c.html#a49b5a291b4a08d92046be71dd5c26032">ad_bottom</a>) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   *pY = <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gaa0b3699a9802eefdf407f0caa59195d5">C_GLCD_V_SIZE</a> - *pY;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="board__keil__mcb__18574357_8c.html#a2d7669cf13f57b0929ae73ce42dd9240">g_isPenDn</a> = 0;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="board__keil__mcb__18574357_8c.html#a68b341ae35dcc1090d49a4b682753a9d">g_isNewPenDn</a>) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="board__keil__mcb__18574357_8c.html#a68b341ae35dcc1090d49a4b682753a9d">g_isNewPenDn</a> = 0;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordflow">if</span> (*pX &lt; 0) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   *pX = -*pX;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (*pY &lt; 0) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   *pY = -*pY;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">/* Turn on LCD backlight */</span></div>
<div class="line"><a name="l00638"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga56f5c2aa9b42d140429abdd9d3f629c8">  638</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga56f5c2aa9b42d140429abdd9d3f629c8" title="Turn on Board LCD Backlight.">Board_SetLCDBacklight</a>(uint8_t Intensity)</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;{</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; <span class="keywordtype">bool</span> OnOff = (bool) (Intensity != 0);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga769258ead822b26f77ea567456f58e2f" title="Set a GPIO port/bit state.">Chip_GPIO_WritePortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 3, 8, OnOff);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="preprocessor">#ifndef CORE_M0</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="preprocessor"></span><span class="comment">/* PIN0 Interrupt not available in M0 core */</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">/* Interrupt handler for GPIO0 */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno"><a class="code" href="board__keil__mcb__18574357_8c.html#aa32175f2e875afc79e5e2df8fe065593">  648</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="board__keil__mcb__18574357_8c.html#aa32175f2e875afc79e5e2df8fe065593">GPIO0_IRQHandler</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="group___e_x_a_m_p_l_e_s___p_e_r_i_p_h__18_x_x43_x_x___r_i_t.html#ga9d2defc76051664aa237611ff3b09658">On</a>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#gaf4971f20d9169506973affe09c910857" title="Get GPIO Interrupt Status.">Chip_GPIO_IntGetStatus</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#gaa58960983d95c688cd33ff8ca91f99f3">LPC_GPIO_PIN_INT</a>, 0, 0, 0)) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <a class="code" href="group___g_p_i_o__11_x_x.html#gad41a64317190dd834d5742902d219123" title="Clear GPIO Interrupt (Edge interrupt cases only)">Chip_GPIO_IntClear</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#gaa58960983d95c688cd33ff8ca91f99f3">LPC_GPIO_PIN_INT</a>, 0, 0);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  On = (bool) !On;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4beb63d516764b260e9798642fab0047" title="Sets the state of a board LED to on or off.">Board_LED_Set</a>(1, On);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">/* Initializes board specific GPIO Interrupt */</span></div>
<div class="line"><a name="l00660"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___n_g_x___x_p_l_o_r_e_r__18304330.html#gae3d5ea3b58b099b0abd74a8e71e57059">  660</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___k_e_i_l___m_c_b__18574357.html#gae3d5ea3b58b099b0abd74a8e71e57059" title="Initializes board specific GPIO Interrupt.">Board_GPIO_Int_Init</a>()</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;{</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xF, 9, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaec79b551b98008d8986e719926f254bc">SCU_MODE_FUNC0</a>)); <span class="comment">/* PF.9 : POTI button */</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, 7, 23, <span class="keyword">false</span>); <span class="comment">/* PF.9 -&gt; GPIO7[23] : input */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gadb0aaa53ab89f5b128832f5aa2eeb5db" title="GPIO Interrupt Pin Select.">Chip_SCU_GPIOIntPinSel</a>(0, 7, 23);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#gae19033d5bea86ec4bacf7e3032f0da28" title="Enable GPIO Interrupt.">Chip_GPIO_IntCmd</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#gaa58960983d95c688cd33ff8ca91f99f3">LPC_GPIO_PIN_INT</a>, 0, 0, <a class="code" href="group___i_p___g_p_i_o_p_i_n_i_n_t__001.html#gga077dafdc28a5f9b34350517c2fa483eca487bfe7e78328e249b4cf0ca6690164b">GPIOPININT_FALLING_EDGE</a>); <span class="comment">/* Configure GPIO0[7] to interrupt pin (SW2 switch) */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; NVIC_EnableIRQ(PIN_INT0_IRQn); <span class="comment">/* enable GPIO interrupt 0 */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/* Initializes SDMMC interface */</span></div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___h_i_t_e_x___e_v_a__18504350.html#gab04cb3a09e241ac526a0fb2e9c0c37f8">  673</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___h_i_t_e_x___e_v_a__18504350.html#gab04cb3a09e241ac526a0fb2e9c0c37f8" title="Initialize pin muxing for SDMMC interface.">Board_SDMMC_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 4, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>)); <span class="comment">/* PC.4 connected to SDIO_D0 */</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 5, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>)); <span class="comment">/* PC.5 connected to SDIO_D1 */</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 6, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>)); <span class="comment">/* PC.6 connected to SDIO_D2 */</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 7, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>)); <span class="comment">/* PC.7 connected to SDIO_D3 */</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 8, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>)); <span class="comment">/* PC.4 connected to SDIO_CD */</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 10, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>)); <span class="comment">/* PC.10 connected to SDIO_CMD */</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 0, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaae9b7437fda7df4f7e0266d62df1ead1">SCU_MODE_HIGHSPEEDSLEW_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga801a72581d27aa13d27f0d6bee3cd8b2">SCU_MODE_FUNC7</a>));<span class="comment">/* PC.0 connected to SDIO_CLK */</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">/* Initializes SSP interface */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gafdf2ff29bb90173de0449d0b80dbf407">  686</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24.html#ga80ae64535f1219bdde79aeafe80b7c39" title="Initialize pin muxing for SSP interface.">Board_SSP_Init</a>(<a class="code" href="struct_i_p___s_s_p__001___t.html" title="SSP register block structure.">LPC_SSP_T</a> *pSSP)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;{</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; <span class="keywordflow">if</span> (pSSP == <a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#gac213e0325a8e8a972bd2e0dd6ccf353c">LPC_SSP0</a>) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">/* Set up clock and power for SSP0 module */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">/* Configure SSP0 pins*/</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x3, 3, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* P3.3 connected to SCL/SCLK SCU_MODE_FUNC2=SSP0 SCK0 */</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x3, 6, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* P3.6 connected to nCS  SCU_MODE_FUNC2=SSP0 SSEL0 */</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x3, 7, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* P3.7 connected to SO  SCU_MODE_FUNC2=SSP0 MISO0 */</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x3, 8, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* P3.8 connected to nSI SCU_MODE_FUNC2=SSP0 MOSI0 */</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pSSP == <a class="code" href="group___p_e_r_i_p_h__13_x_x___b_a_s_e.html#ga09c4610ada1d9aa18913963cbd1a6e52">LPC_SSP1</a>) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">/* Set up clock and power for SSP1 module */</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">/* Configure SSP1 pins*/</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xF, 4, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaec79b551b98008d8986e719926f254bc">SCU_MODE_FUNC0</a>)); <span class="comment">/* PF.4 connected to SCL/SCLK SCU_MODE_FUNC0 = SSP1 SCK1 */</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xF, 5, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga092912eb475816a97971f97890e2d4a4">SCU_PINIO_FAST</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* PF.5 connected to nCS  SCU_MODE_FUNC2 = SSP1 SSEL1 */</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xF, 6, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* PF.6 connected to SO     SCU_MODE_FUNC2 = SSP1 MISO1 */</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xF, 7, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga015c4c831f137731e9369a37e1fa1574">SCU_MODE_MODE_PULLUP</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga6712e3f281a36fca627e7250bb50c0fe">SCU_MODE_FUNC2</a>)); <span class="comment">/* PF.7 connected to nSI    SCU_MODE_FUNC2 = SSP1 MOSI1 */</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">/* Initializes board specific buttons */</span></div>
<div class="line"><a name="l00710"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga6eac130aa4001f6268d0276a42454af5">  710</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga6eac130aa4001f6268d0276a42454af5" title="Initialize buttons on the board.">Board_Buttons_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0x4,  0, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaec79b551b98008d8986e719926f254bc">SCU_MODE_FUNC0</a>)); <span class="comment">/* P9.1  : LED 6 */</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaed02d174d4d0b83cda2b128a7f26ca6a">BUTTONS_BUTTON1_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga535c17399bc04fe8ee2576d10da433f3">BUTTONS_BUTTON1_GPIO_BIT_NUM</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">/* Sets up default states for joystick */</span></div>
<div class="line"><a name="l00717"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga48a2cb2f4a675e0d7e4bc06690819ccb">  717</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga48a2cb2f4a675e0d7e4bc06690819ccb" title="Initialize Joystick.">Board_Joystick_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 9, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf1b58bdd83fd9b8331aaa1d54420a656">SCU_MODE_FUNC4</a>));  <span class="comment">/* PC_9  as GPIO6[8] */</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 11, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf1b58bdd83fd9b8331aaa1d54420a656">SCU_MODE_FUNC4</a>));  <span class="comment">/* PC_11 as GPIO6[10] */</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 12, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf1b58bdd83fd9b8331aaa1d54420a656">SCU_MODE_FUNC4</a>));  <span class="comment">/* PC_12 as GPIO6[11] */</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 13, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf1b58bdd83fd9b8331aaa1d54420a656">SCU_MODE_FUNC4</a>));  <span class="comment">/* PC_13 as GPIO6[12] */</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf7f798c364e281b3aa3247516e0a913e" title="Sets I/O Control pin mux.">Chip_SCU_PinMuxSet</a>(0xC, 14, (<a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5fbb71f605323e30184fc4465a0696dc">SCU_MODE_MODE_INACT</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga66123729d389bc3191481392d4063290">SCU_MODE_INBUFF_EN</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga240a8e7d216587a3dcb1989274cb73a8">SCU_MODE_ZIF_DIS</a> | <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#gaf1b58bdd83fd9b8331aaa1d54420a656">SCU_MODE_FUNC4</a>));  <span class="comment">/* PC_14 as GPIO6[13] */</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gae4e03ab24f688e6cd765a69db115a8a7">JOYSTICK_UP_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga2fabf4fb74c4970bf874d02569c2e7ce">JOYSTICK_UP_GPIO_BIT_NUM</a>, <span class="keyword">false</span>);  <span class="comment">/* input */</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaf460e43c0a9d25ff6916ebadda018a35">JOYSTICK_DOWN_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga74a7cecf5e8e565a18ef143e5b5718ba">JOYSTICK_DOWN_GPIO_BIT_NUM</a>, <span class="keyword">false</span>); <span class="comment">/* input */</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga6b17d3dff828dadea27b211e4504b340">JOYSTICK_LEFT_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga35928511d53b3d8345bdb489aacbfc39">JOYSTICK_LEFT_GPIO_BIT_NUM</a>, <span class="keyword">false</span>); <span class="comment">/* input */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaf12b6cf56e40d34c7e0b82cefa4357ce">JOYSTICK_RIGHT_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga0318a72716ef6f13b2443dbbc3f14c15">JOYSTICK_RIGHT_GPIO_BIT_NUM</a>, <span class="keyword">false</span>); <span class="comment">/* input */</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; <a class="code" href="group___g_p_i_o__11_x_x.html#ga21ebb6a7bcdb311acecafaf055c967a5" title="Seta GPIO direction.">Chip_GPIO_WriteDirBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaa8738e5a23d8c9025a37c1d4cd1160d5">JOYSTICK_PRESS_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga99a5f726107ca1a6e5b6f5aa9bbb3298">JOYSTICK_PRESS_GPIO_BIT_NUM</a>, <span class="keyword">false</span>); <span class="comment">/* input */</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">/* Gets joystick status */</span></div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gadb514f11b0c7bfc1ca0c90accbb44ddb">  733</a></span>&#160;uint8_t <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gadb514f11b0c7bfc1ca0c90accbb44ddb" title="Get Joystick status.">Joystick_GetStatus</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; uint8_t ret = <a class="code" href="board__nxp__xpresso__11u14_8h.html#af2d1f15dcb7bbeb2e2767ac1d6424ee1">NO_BUTTON_PRESSED</a>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gae4e03ab24f688e6cd765a69db115a8a7">JOYSTICK_UP_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga2fabf4fb74c4970bf874d02569c2e7ce">JOYSTICK_UP_GPIO_BIT_NUM</a>) == 0) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  ret |= <a class="code" href="board__nxp__xpresso__11u14_8h.html#a85e47af11e6a32e3a819f247d9f619d6">JOY_UP</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaf460e43c0a9d25ff6916ebadda018a35">JOYSTICK_DOWN_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga74a7cecf5e8e565a18ef143e5b5718ba">JOYSTICK_DOWN_GPIO_BIT_NUM</a>) == 0) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  ret |= <a class="code" href="board__nxp__xpresso__11u14_8h.html#a950e3ba6cd65c992b92f36b837c52a0a">JOY_DOWN</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga6b17d3dff828dadea27b211e4504b340">JOYSTICK_LEFT_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga35928511d53b3d8345bdb489aacbfc39">JOYSTICK_LEFT_GPIO_BIT_NUM</a>) == 0) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  ret |= <a class="code" href="board__nxp__xpresso__11u14_8h.html#a5b41c548ba97989b473f6393b9c2c7f1">JOY_LEFT</a>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaf12b6cf56e40d34c7e0b82cefa4357ce">JOYSTICK_RIGHT_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga0318a72716ef6f13b2443dbbc3f14c15">JOYSTICK_RIGHT_GPIO_BIT_NUM</a>) == 0) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  ret |= <a class="code" href="board__nxp__xpresso__11u14_8h.html#a59c1b2e5c6856ed044ba0635102fd995">JOY_RIGHT</a>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaa8738e5a23d8c9025a37c1d4cd1160d5">JOYSTICK_PRESS_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga99a5f726107ca1a6e5b6f5aa9bbb3298">JOYSTICK_PRESS_GPIO_BIT_NUM</a>) == 0) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  ret |= <a class="code" href="board__nxp__xpresso__11u14_8h.html#a08968e3964995337594242759b10a988">JOY_PRESS</a>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;}</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">/* Gets buttons status */</span></div>
<div class="line"><a name="l00758"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga13cca90c46cb527f5cc7a1bfe1d0121a">  758</a></span>&#160;<a class="code" href="_e_h_c_i_8h.html#ad14d3f736deaab092d7bc0dcb1430bc8">uint32_t</a> <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga13cca90c46cb527f5cc7a1bfe1d0121a" title="Get button status.">Buttons_GetStatus</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;{</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; uint8_t ret = <a class="code" href="board__nxp__xpresso__11u14_8h.html#af2d1f15dcb7bbeb2e2767ac1d6424ee1">NO_BUTTON_PRESSED</a>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="group___g_p_i_o__11_x_x.html#ga308a1d5a5e79e6a988e30dbb2131236d" title="Read a GPIO state.">Chip_GPIO_ReadPortBit</a>(<a class="code" href="group___p_e_r_i_p_h__11_x_x___b_a_s_e.html#ga401a76842ea88d6e311bba578f43b259">LPC_GPIO_PORT</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#gaed02d174d4d0b83cda2b128a7f26ca6a">BUTTONS_BUTTON1_GPIO_PORT_NUM</a>, <a class="code" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_u14.html#ga535c17399bc04fe8ee2576d10da433f3">BUTTONS_BUTTON1_GPIO_BIT_NUM</a>) == 0) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  ret |= <a class="code" href="board__nxp__xpresso__11u14_8h.html#a4db3afa28c58f940cf56bf28e21ee78c">BUTTONS_BUTTON1</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/* Initialize DAC interface for the board */</span></div>
<div class="line"><a name="l00769"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___h_i_t_e_x___e_v_a__18504350.html#ga3e041f43db2e40c8f95309f923c64fe1">  769</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___h_i_t_e_x___e_v_a__18504350.html#ga3e041f43db2e40c8f95309f923c64fe1" title="Initialize DAC interface for the board.">Board_DAC_Init</a>(<a class="code" href="struct_i_p___d_a_c__001___t.html" title="DAC register block structure.">LPC_DAC_T</a> *pDAC)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;{</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; <a class="code" href="group___s_c_u__18_x_x__43_x_x.html#ga5dd513d87e5d14f80544f59692536a92" title="DAC Pin Configuration.">Chip_SCU_DAC_Analog_Config</a>();</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;}</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">/* FIXME Should we remove this function? */</span></div>
<div class="line"><a name="l00775"></a><span class="lineno"><a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga81a9695514c59fdcbbc7f9ea89db36ad">  775</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga81a9695514c59fdcbbc7f9ea89db36ad" title="Create Serial Stream.">Serial_CreateStream</a>(<span class="keywordtype">void</span> *Stream)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;{</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; <span class="comment">// implement later</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c8fa76d8dc1b9e06ff8aeb3121608b1b.html">software</a></li><li class="navelem"><a class="el" href="dir_b7e4ec23273c3b0265e149bb747aff2e.html">lpc_core</a></li><li class="navelem"><a class="el" href="dir_003cbb7b0f3d4f0c2b47ccca24fcb1b3.html">lpc_board</a></li><li class="navelem"><a class="el" href="dir_d52c6b0a2cebf0647ba22204bc3fe008.html">boards_18xx_43xx</a></li><li class="navelem"><a class="el" href="dir_75582c554ec5623e073aae9565decc1a.html">keil_mcb_18574357</a></li><li class="navelem"><a class="el" href="board__keil__mcb__18574357_8c.html">board_keil_mcb_18574357.c</a></li>
    <li class="footer">Generated on Fri May 10 2013 10:42:11 for LPCOpen Platform by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
