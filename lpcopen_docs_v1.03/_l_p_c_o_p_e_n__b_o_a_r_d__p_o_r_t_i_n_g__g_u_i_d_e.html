<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LPCOpen Platform: Porting a new platform to LPCOpen</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="driver.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">LPCOpen Platform
   &#160;<span id="projectnumber">v1.03</span>
   </div>
   <div id="projectbrief">LPCOpen Platform for NXP LPC Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_l_p_c_o_p_e_n__b_o_a_r_d__p_o_r_t_i_n_g__g_u_i_d_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Porting a new platform to LPCOpen </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Introduction</b><br/>
 This guide explains how to add a new Board layer into LPCOpen and configure the drivers and tools for that platform. The general porting procedure is as follows:<br/>
</p>
<ul>
<li>Create a new board directory in the ./software/lpc_core/lpc_board/board_{chip} are for your board<br/>
</li>
<li>Create sys_config.h file used to configure platform code<br/>
</li>
<li>Add board code for debug, LED, clocks setup, memory setup, etc.<br/>
</li>
</ul>
<p>There are many reference platforms that currently exist in LPCOpen for getting started. These platforms provide reference code that can be easily ported to a new platform.<br/>
</p>
<p><em>The LPCOpen projects have an include path that points to a specific board layer directory for it's project target. If you want to use existing LPCOpen projects on your board without any modifications, it is recommended to use an existing board layer directory name for your new platform or you will need to modify the board layer include path for the projects you plan on using.</em><br/>
</p>
<p><em>For this guide, we'll create a new Board layer using an (non-existant) example board called 'greenboard'. Greenboard will have a LPC4076 device with a 16-bit DRAM device and uses a 13MHz crystal. Greenboard also supports Ethernet using an RMII configuration, uses a lot of general purpose inputs and outputs for monitoring and controlling signals, and has a RS232 connector attached to UART1.</em><br/>
</p>
<p><b>Create new directory and initial files</b><br/>
 Start by creating a new directory in the LPC17xx/40xx board area for the board. The new directory will be named after the board and located in the LPC17xx/40xx board area at<br/>
</p>
<ul>
<li>"&lt;LPCOPEN_PATH&gt;\software\lpc_core\lpc_boards\boards_17xx_40xx\greenboard".<br/>
</li>
</ul>
<p>A minimum of 3 files are needed in the new directory. These files are:<br/>
</p>
<ul>
<li>sys_config.h (Platform configuration file)<br/>
</li>
<li>board.h (Board layer include file)<br/>
</li>
<li>Board and system source code (board.c) (Board layer initialization code and APIs)<br/>
</li>
</ul>
<p><em>Current LPCOpen board layers may have more than these 3 files. Most LPCOpen Board layer code separates the code for <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> and board APIs into 2 separate source code files and uses a local board specific header file that's include by board.h.</em><br/>
</p>
<p><b>sys_config.h file</b><br/>
 The sys_config.h file is used by the compiler to perform build-time optimization of all source code. Definitions and values setup in this file are used to setup drivers to your board's configuration and may vary per device. You can get hints of settings for this file from other board layer code or a list of posible settings for this file at <a class="el" href="_s_y_s_c_o_n_f_i_g__d_e_f__a_d_d.html">Adding platform definitions using sys_config.h</a>.<br/>
</p>
<p><em>For Greenboard, we need to add the following defines:</em><br/>
</p>
<ul>
<li>CHIP_LPC407X_8X // LPC40xx device family for LPC4076<br/>
</li>
<li>USE_RMII // Uses RMII interface for Ethernet<br/>
</li>
<li>CRYSTAL_MAIN_FREQ_IN=13000000 // 13MHz main crystal frequency<br/>
</li>
<li>CRYSTAL_32K_FREQ_IN=32768 // 32KHz <a class="el" href="struct_r_t_c.html">RTC</a> frequency<br/>
</li>
<li>DEBUG_ENABLE // Enable Debug support<br/>
</li>
<li>DEBUG_UART=LPC_UART1 // Debug UART is UART1<br/>
</li>
</ul>
<pre class="fragment">#ifndef __SYS_CONFIG_H_
#define __SYS_CONFIG_H_

/* CORE_M4 needs to be setup as a compiler definition for the LPC4076 and
   should not be included in sys_config.h */

#define CHIP_LPC407X_8X
#define USE_RMII
#define CRYSTAL_MAIN_FREQ_IN (13000000)
#define CRYSTAL_32K_FREQ_IN (32768)
#define DEBUG_ENABLE
#define DEBUG_UART LPC_UART3

#endif /* __SYS_CONFIG_H_ */
</pre><p><b>board.h file</b><br/>
 The board.h file includes optional function definitions for setting up peripheral interfaces when using the various LPCOpen examples. These functions are usually in the format:<br/>
 Board_&lt;PERIPHERAL&gt;_Init(pointer to peripheral block);<br/>
</p>
<p>The board.h file usually includes chip.h, <a class="el" href="board__api_8h.html">board_api.h</a> (which contains the function definitions for standard board API functions), and any other board specific files. <br/>
</p>
<p><em>Since I want to use some of the LPCOpen examples on Greenboard, some Board layer functions have been added to support them for UART, I2C, and SSP. The <a class="el" href="lpc__phy_8h.html">lpc_phy.h</a> file is included here to support the simple PHY driver for the Ethernet interface.</em><br/>
</p>
<pre class="fragment">#ifndef __GREENBOARD_H_
#define __GREENBOARD_H_

#include "chip.h"
#include "board_api.h"
#include "lpc_phy.h"

#ifdef __cplusplus
extern "C" {
#endif

/* These board layer functions are called from the LPCOpen examples and
   configure the board for the selected interface (like pinmuxing) */
void Board_UART_Init(LPC_USART_T *pUART);
void Board_SSP_Init(LPC_SSP_T *pSSP);
void Board_I2C_Init(I2C_ID_T id);

void Board_ENET_GetMacADDR(uint8_t *mcaddr);

#endif /* __GREENBOARD_H_ */
</pre><p><b>board.c file</b><br/>
 The board.c file includes the following recommended functions, as defined by the <a class="el" href="board__api_8h.html">board_api.h</a> (<a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html">BOARD: Common board functions</a>) file. Most LPCOpen examples use these functions.<br/>
</p>
<ul>
<li><a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> (sets up the clocking, pin muxing, and memory)<br/>
</li>
<li>SystemCoreClock variable and initialization function (<a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f" title="Update system core clock rate, should be called if the system has a clock rate change.">SystemCoreClockUpdate()</a>)<br/>
</li>
<li><a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gabcba073f50ad637ee6bc852f64ea2ce6" title="Initializes board UART for output, required for printf redirection.">Board_Debug_Init()</a> function (Sets up debug I/O, for this board mapped to UART1/DEBUG_UART<br/>
</li>
<li><a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gada2a79f4fcd7cd730317fc34291bf08e" title="Sends a single character on the UART, required for printf redirection.">Board_UARTPutChar()</a>, <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4cffd2ff35f970b7dfad4fdf6419ecf6" title="Get a single character from the UART, required for scanf input.">Board_UARTGetChar()</a>, and <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga26211607542af1bb2a867d6641a8d4f3" title="Prints a string to the UART.">Board_UARTPutSTR()</a> functions<br/>
</li>
<li><a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4beb63d516764b260e9798642fab0047" title="Sets the state of a board LED to on or off.">Board_LED_Set()</a> and <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga8e79f51947703de384c34bc86908bd9e" title="Returns the current state of a board LED.">Board_LED_Test()</a> functions<br/>
</li>
<li><a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119" title="Set up and initialize all required blocks and functions related to the board hardware.">Board_Init()</a> function<br/>
</li>
</ul>
<p>The board.c file also includes the following optional functions. These functions sould only be needed if you use an example that uses them.<br/>
</p>
<ul>
<li><a class="el" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24.html#gaff0add2a9439b5ec4954ad17c33eb6e2" title="Initialize pin muxing for UART interface.">Board_UART_Init()</a>, <a class="el" href="group___b_o_a_r_d___n_x_p___x_p_r_e_s_s_o__11_c24.html#ga80ae64535f1219bdde79aeafe80b7c39" title="Initialize pin muxing for SSP interface.">Board_SSP_Init()</a>, and <a class="el" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#gad631ffdb10f310f5a4b05f603b6149bf" title="Initialize I2C Pins for I2C Operation.">Board_I2C_Init()</a> functions<br/>
</li>
<li><a class="el" href="group___b_o_a_r_d___e_a___d_e_v_k_i_t__17884088.html#ga4e21ba86f42bc4dd53b704a81d923e1d" title="Returns the MAC address assigned to this board.">Board_ENET_GetMacADDR()</a> function<br/>
</li>
</ul>
<p><b>board.c file - <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> function</b><br/>
 LPCOpen startup code - code that gets called directly when the chip is reset - calls the <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> first prior to starting the application. This initializes most platform resources prior to the application using them. <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> performs the following:<br/>
</p>
<ul>
<li>Sets up system clocking - PLLs, clock sources, CPU clock rate, etc.<br/>
</li>
<li>Sets up board pin muxing<br/>
</li>
<li>Sets up memory, FLASH timing, <br/>
</li>
<li>Other device specific tasks (FPU initialization, VTOR setup, etc.)<br/>
</li>
</ul>
<p><em>The full implementation of <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> varies per platform and is beyond the scope of this guide. Other LPCOpen <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> functions for similar board will probably work with some modifications. On a new platform, this function can be initially stubbed out, but must setup the proper VTOR pointer (replicate this code from another platform). In current LPCOpen platforms, <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> is broken up into separate clock, pin muxing, and memory setup functions to make things more readable. <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> is called before the data segments have been initialized, so any code in <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> must take care to avoid using un-initialized data segments. LPCOpen <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> functions only used the stack.</em><br/>
</p>
<p>On the Greenboard platform, <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> would setup the PLL to 120MHz and switch the CPU core clock to run from the PLL. DRAM would be initialized with clock at 60MHz. All the pins in the LPC4076 would be placed into the correct pin mux configuration prior to exist.<br/>
</p>
<p><b>board.c file - <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f" title="Update system core clock rate, should be called if the system has a clock rate change.">SystemCoreClockUpdate()</a> function and SystemCoreClock</b> The <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f" title="Update system core clock rate, should be called if the system has a clock rate change.">SystemCoreClockUpdate()</a> function updates the SystemCoreClock variable with the current COPU clock speed. This function should be called in <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119" title="Set up and initialize all required blocks and functions related to the board hardware.">Board_Init()</a> or whenever a CPU clock rate change is made.<br/>
</p>
<pre class="fragment">/*!&lt; System Clock Frequency (Core Clock) */
uint32_t SystemCoreClock;

/* Update system core clock rate, should be called if the system has
   a clock rate change */
void SystemCoreClockUpdate(void)
{
 /* CPU core speed */
 SystemCoreClock = Chip_Clock_GetSystemClockRate();
}
</pre><p><b>board.c file - <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gabcba073f50ad637ee6bc852f64ea2ce6" title="Initializes board UART for output, required for printf redirection.">Board_Debug_Init()</a> function</b><br/>
 The <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gabcba073f50ad637ee6bc852f64ea2ce6" title="Initializes board UART for output, required for printf redirection.">Board_Debug_Init()</a> function sets up the Debug I/O used with the DEBUGOUT, DEBUGSTR and DEBUGIN macros. In most cases, this function is setup using the DEBUG_ENABLE and DEBUG_UART definitions.<br/>
</p>
<pre class="fragment">void Board_Debug_Init(void)
{
#if defined(DEBUG_ENABLE)
 /* UART already correctly muxed in SystemInit() */

 /* Setup UART for 115.2K8N1 */
 Chip_UART_Init(DEBUG_UART);
 Chip_UART_SetBaud(DEBUG_UART, 115200);
 Chip_UART_ConfigData(DEBUG_UART, UART_DATABIT_8, UART_PARITY_NONE, UART_STOPBIT_1);

 /* Enable UART Transmit */
 Chip_UART_TxCmd(DEBUG_UART, ENABLE);
#endif
}
</pre><p><b>board.c file - <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gada2a79f4fcd7cd730317fc34291bf08e" title="Sends a single character on the UART, required for printf redirection.">Board_UARTPutChar()</a>, <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4cffd2ff35f970b7dfad4fdf6419ecf6" title="Get a single character from the UART, required for scanf input.">Board_UARTGetChar()</a>, and <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga26211607542af1bb2a867d6641a8d4f3" title="Prints a string to the UART.">Board_UARTPutSTR()</a> functions</b><br/>
 The Board_UART*() functions are used to send a character or string, or get a byte form the Debug I/O channel. When DEBUG_ENABLE is defined, these functions are mapped to the DEBUGOUT, DEBUGSTR and DEBUGIN macros. If not using DEBUG_ENABLE, these functions do not need to be defined.<br/>
</p>
<pre class="fragment">/* Sends a character on the UART */
void Board_UARTPutChar(char ch)
{
#if defined(DEBUG_ENABLE)
 while (Chip_UART_SendByte(DEBUG_UART, (uint8_t) ch) == ERROR) {}
#endif
}

/* Gets a character from the UART, returns EOF if no character is ready */
int Board_UARTGetChar(void)
{
#if defined(DEBUG_ENABLE)
 uint8_t data;

 if (Chip_UART_ReceiveByte(DEBUG_UART, &amp;data) == SUCCESS) {
  return (int) data;
 }
#endif
 return EOF;
}

/* Outputs a string on the debug UART */
void Board_UARTPutSTR(char *str)
{
#if defined(DEBUG_ENABLE)
 while (*str != '\0') {
  Board_UARTPutChar(*str++);
 }
#endif
}
</pre><p><b>board.c file - <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4beb63d516764b260e9798642fab0047" title="Sets the state of a board LED to on or off.">Board_LED_Set()</a> and <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga8e79f51947703de384c34bc86908bd9e" title="Returns the current state of a board LED.">Board_LED_Test()</a> functions</b><br/>
 The Board_LED*() functions are used to set or test an LED state.<br/>
</p>
<p><em><a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gacd2ca989799e02bfcd8357fe75138cb4" title="Toggles the current state of a board LED.">Board_LED_Toggle()</a> function is defined in board.h and uses both the <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga4beb63d516764b260e9798642fab0047" title="Sets the state of a board LED to on or off.">Board_LED_Set()</a> and <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga8e79f51947703de384c34bc86908bd9e" title="Returns the current state of a board LED.">Board_LED_Test()</a> functions and doesn't need a board layer functions.</em><br/>
</p>
<pre class="fragment">/* Sets the state of a board LED to on or off */
void Board_LED_Set(uint8_t LEDNumber, bool On)
{
 /* There is only one LED */
 if (LEDNumber == 0) {
  Chip_GPIO_WritePortBit(LPC_GPIO, LED0_GPIO_PORT_NUM, LED0_GPIO_BIT_NUM, On);
 }
}

/* Returns the current state of a board LED */
bool Board_LED_Test(uint8_t LEDNumber)
{
 return Chip_GPIO_ReadPortBit(LPC_GPIO, LED0_GPIO_PORT_NUM, LED0_GPIO_BIT_NUM);
}
</pre><p><b>board.c file - <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119" title="Set up and initialize all required blocks and functions related to the board hardware.">Board_Init()</a> function</b><br/>
 The <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119" title="Set up and initialize all required blocks and functions related to the board hardware.">Board_Init()</a> function is used to initialize the board once the application starts and after <a class="el" href="sysinit__nxp__xpresso__11c24_8c.html#a93f514700ccf00d08dbdcff7f1224eb2" title="Setup the system.">SystemInit()</a> has completed. In LPCOpen examples, this is usually the first function called.<br/>
</p>
<p>At a minimum, <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae8d2d761b984f48c3dbb27dd32a8c119" title="Set up and initialize all required blocks and functions related to the board hardware.">Board_Init()</a> should call <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#ga5f3d8b382683793eb0b2723083f518f8">DEBUGINIT()</a> to set up the Debug I/O and <a class="el" href="group___b_o_a_r_d___c_o_m_m_o_n___a_p_i.html#gae0c36a9591fe6e9c45ecb21a794f0f0f" title="Update system core clock rate, should be called if the system has a clock rate change.">SystemCoreClockUpdate()</a> to setup the SystemCoreClock variable. Any special board setup should also be done here, such as setting GPIO pin direction, or setting up other common board code.<br/>
</p>
<pre class="fragment">/* Set up and initialize all required blocks and functions related to the
   board hardware */
void Board_Init(void)
{
 /* Sets up DEBUG UART */
 DEBUGINIT();

 /* Updates SystemCoreClock global var with current clock speed */
 SystemCoreClockUpdate();

 /* Initializes GPIO */
 Chip_GPIO_Init(LPC_GPIO);
 Chip_IOCON_Init(LPC_IOCON);

 /* Initialize LEDs */
 Board_LED_Init();
}
</pre><p><b>Other required board files</b><br/>
 If yuor platform uses DEBUG_ENABLE, you need to include the <a class="el" href="_retarget_8c.html">retarget.c</a> file from the 'board_common' directory in your image.<br/>
</p>
<p><em>The Greenboard platform uses DEBUG_ENABLE and will require the <a class="el" href="_retarget_8c.html">retarget.c</a> file.</em><br/>
</p>
<p><b>Common board files</b><br/>
 The 'board_common' directory has some common board code that works across multiple platforms.<br/>
</p>
<p><em>The Greenboard Ethernet interface requires an external PHY. If the PHY on the Greenboard matches one of the simple PHY drivers in 'board_common', it can be included in the image to quickly get PHY support.</em><br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">LPCOpen Platform for NXP LPC Microcontrollers</a></li><li class="navelem"><a class="el" href="_l_p_c_o_p_e_n__t_e_c_h_l_i_b.html">LPCOpen technical library</a></li>
    <li class="footer">Generated on Fri May 10 2013 10:42:52 for LPCOpen Platform by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
