<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LPCOpen Platform: LPC17xx/40xx SPIFI Flash programmer example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="driver.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">LPCOpen Platform
   &#160;<span id="projectnumber">v1.03</span>
   </div>
   <div id="projectbrief">LPCOpen Platform for NXP LPC Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">LPC17xx/40xx SPIFI Flash programmer example</div>  </div>
<div class="ingroups"><a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x.html">Misc examples</a></div></div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Example description</b><br/>
 This example demonstrates programming of the SPI flash using the SPIFI interface. The program can be run in two ways, the first and the default is having <a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga578154cf9dc5126af952102e1e1a3a33">USE_SPIFI_LIB</a> defined so that the code makes use of the functions provided by the spifi_*.lib. The second one is having <a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga578154cf9dc5126af952102e1e1a3a33">USE_SPIFI_LIB</a> not defined which will make direct calls to the boot ROM function pointers and will not use any library calls.<br/>
 By default the program writes 256 bytes of data starting from hex 00 to hex FF to <a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga97df56d1a36c389e71c95c938e5f3774">SPIFI_WRITE_SECTOR_OFFSET</a><br/>
</p>
<p>UART needs to be setup prior to running the example as the example produces the output to the UART console. If LED1 is ON then the programming is successful, if LED2 is ON then the programming has failed.<br/>
</p>
<p><b>Special connection requirements</b><br/>
 There are no special connection requirements for this example.<br/>
</p>
<p><b>Build procedures:</b><br/>
 <a class="el" href="_l_p_c_o_p_e_n_17_x_x40_x_x__b_u_i_l_d_p_r_o_c_s__k_e_i_l.html">LPC17xx/40xx example quickstart for Keil uVision4</a><br/>
 <a class="el" href="_l_p_c_o_p_e_n_17_x_x40_x_x__b_u_i_l_d_p_r_o_c_s__i_a_r.html">LPC17xx/40xx example quickstart for IAR EWARM</a><br/>
 <a class="el" href="_l_p_c_o_p_e_n_17_x_x40_x_x__b_u_i_l_d_p_r_o_c_s__x_p_r_e_s_s_o.html">LPC17xx/40xx example quickstart for Code Red Xpresso</a><br/>
</p>
<p><b>Supported boards and board setup:</b><br/>
 <a class="el" href="_l_p_c_o_p_e_n_17_x_x40_x_x__b_o_a_r_d__e_a4088.html">Embedded Artists' LPC4088 Developer's Kit</a><br/>
</p>
<p><b>Submitting LPCOpen issues:</b><br/>
 <a class="el" href="_l_p_c_o_p_e_n__c_o_m_m_u_n_i_t_y.html">Community support for LPCOpen</a> </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf711426d5a7f73a961139f4d05ca9f58"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#gaf711426d5a7f73a961139f4d05ca9f58">verify_spifi_data</a> (const uint8_t *buff, int size)</td></tr>
<tr class="separator:gaf711426d5a7f73a961139f4d05ca9f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10ed6e90e9ac20206b839e6ec470dfd3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga10ed6e90e9ac20206b839e6ec470dfd3">prepare_write_data</a> (uint8_t *buff, int size)</td></tr>
<tr class="separator:ga10ed6e90e9ac20206b839e6ec470dfd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:ga840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point.  <a href="#ga840291bc02cba5474a4cb46a9b9566fe"></a><br/></td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga39654ab322c32ee2e5e384fbea8326bc"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga39654ab322c32ee2e5e384fbea8326bc">data_buffer</a> [PROG_SIZE]</td></tr>
<tr class="separator:ga39654ab322c32ee2e5e384fbea8326bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga700cfc1eb54eed7952bf9986b1e4ad38"><td class="memItemLeft" align="right" valign="top">static SPIFIobj&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga700cfc1eb54eed7952bf9986b1e4ad38">spifi_obj</a></td></tr>
<tr class="separator:ga700cfc1eb54eed7952bf9986b1e4ad38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga3534092af21712a57b15a0e4d2c53869"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define spifi_rom_init</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html#l00063">63</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html">flash_config.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacac1f745c4c26ddd7f4bc1f7442cf19a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPIFI_WRITE_SECTOR_ADDRESS&#160;&#160;&#160;(<a class="el" href="group___s_p_i_f_i__17_x_x__40_x_x.html#ga49966a4cd7668f88f09406709d0b3135">SPIFLASH_BASE_ADDRESS</a> + <a class="el" href="group___e_x_a_m_p_l_e_s___m_i_s_c__17_x_x40_x_x___s_p_i_f_i___p_r_o_g_r_a_m_m_e_r.html#ga97df56d1a36c389e71c95c938e5f3774">SPIFI_WRITE_SECTOR_OFFSET</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html#l00061">61</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html">flash_config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga97df56d1a36c389e71c95c938e5f3774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPIFI_WRITE_SECTOR_OFFSET&#160;&#160;&#160;0x40000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Offset of the sector to which the data to be written </p>

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html#l00060">60</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html">flash_config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga578154cf9dc5126af952102e1e1a3a33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_SPIFI_LIB</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Macro that enables calling of spifi functions using the library, disabling this will directly call the functions in boot rom using bootROM function pointers. </p>

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html#l00044">44</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2flash__config_8h_source.html">flash_config.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point. </p>
<p>Main program body.</p>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html#l00111">111</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga10ed6e90e9ac20206b839e6ec470dfd3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prepare_write_data </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html#l00095">95</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaf711426d5a7f73a961139f4d05ca9f58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int verify_spifi_data </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html#l00083">83</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga39654ab322c32ee2e5e384fbea8326bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t data_buffer[PROG_SIZE]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html#l00071">71</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga700cfc1eb54eed7952bf9986b1e4ad38"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SPIFIobj spifi_obj</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html#l00072">72</a> of file <a class="el" href="lpc17xx__40xx_2examples_2misc_2app__spifi__prog_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 10 2013 10:43:08 for LPCOpen Platform by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
